# 아이템 12. toString을 항상 재정의하라

## 기본 toString

기본 `toString` 메서드는 **PhoneNumber@abbdd** 처럼, 단순히 **클래스_이름@16진수로_표현한_해시코드**를 반환한다.

인스턴스 내 중요한 정보를 반환하여 알려주는 것이 훨씬 유익하기에, `toString`을 재정의하는 것이 좋다. 또한, `toString`의 규악은 "모든 하위 클래스에서 이 메서드를 재정의하라"고 한다.

아이템 10, 11의 `equals`, `hashCode` 규약만큼 중요하진 않지만 이 `toString`을 잘 구현한 클래스는 사용하기 편하고 디버깅도 용이하다.

`System.out.println`, `System.out.printf` 등의 출력 구문, 혹은 디버거가 객체를 출력할 때 자동으로 호출되어 읽기 편하다.

```java
System.out.println(phoneNumber + " 에 연결할 수 없습니다.");
```

## 어떤 정보를 담아야 하는가?

toString을 재정의 할때는, 객체가 가진 모든 주요 정보를 반환하는 게 좋다. 그러나 객체가 거대하거나, 문자열로 표현하기에 적합하지 않은 경우라면 해당되지 않는다. (요약 정보를 담자)

## 반환값의 포맷

반환값의 포맷을 문서화할지 정하는 것이 필요하다.

전화번호, 행렬 같은 **값 클래스**라면 문서화하여 표준적이며 명확하고, 읽기 편하게 되어, 그 값 그대로 입/출력에 사용하거나 새 객체로 저장할 수 있다.

많은 자바 플랫폼의 값 클래스가 따르는 방식이기도 하다.(`BigInteger`, `BigDecimal` ...)

### 단점

포맷을 한번 명시하면, 그 포맷에 얽매이게 되는 단점도 존재한다. 의존성이 생기는 것이다.

반대로 포맷이 없으면 유연성이 생기게 된다. 무엇이든 **trade-off**가 존재한다.

```java
/**
* 이 전화번호의 문자열 표현을 반환한다.
* 이 문자열은 "XXX-YYY-ZZZZ"형태의 12자로 구성된다.
* XXX는 지역코드, YYY는 프리픽스, ZZZZ는 가입자 번호다.
* 각각의 대문자는 10진수 숫자 하나를 나타낸다.
*
* 전화번호의 각 부분의 값이 너무 작아서 자릿수를 채울 수 없다면,
* 앞에서부터 0으로 채워나간다.
* 가입자 번호가 123이라면 전화번호의 마지막 네 문자는 "0123"이 된다.
*/
@Override public String toString() {
    return String.format("%03d-%03d%04d", areaCode, prefix, lineNum);
}
```

포맷을 명시하지 않는다면 아래와 같이 작성할 수 있다. ~~걍 마음대로 적는다는 뜻인 것 같다..~~

```java
/**
* 이 약물에 관한 대략적인 설명을 반환한다.
* 다음은 이 설명의 일반적인 형태이나,
* 상세 형식은 정해지지 않았으며 향후 변경될 수 있다.
* 
* "[약물 #9: 유형-사랑, 냄새=테레빈유, 겉모습=먹물]"
*/
@Override public String toString() { ... }
```

### API를 제공하자.

포맷 명시 여부와 상관없이, `toString`이 반환한 값에 포함된 정보를 얻을 수 있는 **API**도 당연히 제공하는 것이 좋다.

`getter`나, 비즈니스 로직에 맞게 필요한 멤버변수들을 조회할 수 있는 메서드들을 정의하지 않으면 `toString`의 반환 값들에서 파싱해야 하는 귀찮은 상황이 벌어질 수 있다.

## 그 외

> 객체를 생성하지 않는 정적 유틸리티 클래스(아이템 04)는 `toString`을 생성할 필요가 없다. 객체를 만드는 경우가 없기 떄문..

> 열거 클래스도 자바에서 완벽한 `toString`을 제공하니 `toString`을 재정의할 필요가 없다. 

> 상속 받는 하위 클래스들이 공유해야 할 문자열 표현이 있는 추상 클래스라면, `toString`을 재정의해야 한다.

> 아이템 10에서 소개한 구글의 `AutoValue` 프레임워크는 `toString`도 생성해준다.

## 마치며

상위 클래스에서 이미 알맞게 재정의한 경우를 제외하고, 모든 구체 클래스에서는 `Object`의 `toString`을 재정의하자. 

